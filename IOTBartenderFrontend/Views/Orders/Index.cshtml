
@{
    ViewData["Title"] = "Index";
}

<h2>Section title</h2>
<div class="table-responsive">
    <table class="table table-striped table-sm" id="orderTable">
        <thead>
            <tr>
                <th>Id</th>
                <th>Status</th>
                <th>Time</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
</div>


@section Scripts {
    <script type="text/javascript">
        $(document).ready(function () {
            var API_URL = 'https://localhost:44380/';

            // List containing the lastest cached recipies list.
            var ajax_calls = [];

            // Fetch recipies list.
            ajax_calls.push($.getJSON(API_URL + 'api/orders/', function (data) {
                // Array of recipies.
                var items = [];
                // Go through each recipe and created element for it.
                $.each(data, function (key, val) {
                    items.push('<tr><td>' + val['id'] + '</td><td>' + val['status'] + '</td><td>' + val['time'] + '</td><td><button type="button" class="btn btn-primary details" data-id="' + val['id'] + '">Details</button></td></tr>');
                });
                // Add all recipie to selectio bar.
                $("#orderTable tbody").html(items.join(""));
            }));

            $('#orderTable tbody').on('click', '.details', function (e) { 
                var orderId = parseInt($(this).data('id'));
                document.location.href = '/orders/' + orderId + '/details';
            });
        });
    </script>
}